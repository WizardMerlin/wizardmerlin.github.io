<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="/css/fonts.css" />
  <link rel="stylesheet" href="//cdn.bootcss.com/bulma/0.4.1/css/bulma.min.css"> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  
  <title>网络开发中常用的工具 | Merlin&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="整理和重新发布一下网络编程中的调试&amp;测试工具.">
<meta name="keywords" content="网络,linux">
<meta property="og:type" content="article">
<meta property="og:title" content="网络开发中常用的工具">
<meta property="og:url" content="www.merlinblog.site/2017/08/23/net-work-tools.html">
<meta property="og:site_name" content="Merlin&#39;s Blog">
<meta property="og:description" content="整理和重新发布一下网络编程中的调试&amp;测试工具.">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://omotkhw3y.bkt.clouddn.com/net-tools.png">
<meta property="og:updated_time" content="2017-10-09T11:01:44.882Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络开发中常用的工具">
<meta name="twitter:description" content="整理和重新发布一下网络编程中的调试&amp;测试工具.">
<meta name="twitter:image" content="http://omotkhw3y.bkt.clouddn.com/net-tools.png">
  
  
    <link href="/favicon.ico" rel="ico" />
  
  
  <link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/css/nav.css">
<link rel="stylesheet" href="/css/layout.css">
  

</head>

<body>

  <div class="preloader">
    <div class="preloader-inner">
      <ul><li></li><li></li><li></li><li></li><li></li><li></li></ul>
    </div>
  </div>
  <div>
	<header id="navbar" class="overflow-hidden">
  <div class="container">

    <nav class="nav">

         <div class="nav-left">
            <a href="/" class="nav-item" style="font-size: 20px;">
              <span class="logo">Merlin</span>'s Blog
            </a>
           <span style="margin-top:20px; font-size:0.85em; color:grey;">
		      version: 2.0
		   </span>
         </div>




        <div class="nav-right nav-menu">
            <a class="nav-item" id="search" onclick="tmpfobid()">
                <i class="fa fa-search" aria-hidden="true"></i>
            </a>
            
            <a class="nav-item" href="/">
                主页
            </a>
            
            <a class="nav-item" href="/tags">
                标签集合
            </a>
            
            <a class="nav-item" href="/works">
                开源作品
            </a>
            
            <a class="nav-item" href="/about">
                关于博主
            </a>
            
            <a class="nav-item" href="/atom.xml">
                Rss
            </a>
            
        </div>

        <span class="nav-toggle" id="navMenuDropdown">
            <span></span>
            <span></span>
            <span></span>
        </span>

        <div class="navbar-menu position-absolute full-width content-box is-hidden-desktop is-flex flex-column center" style="top: 100%;">
            
            <a class="nav-item flex-1" href="/">
                主页
            </a>
            
            <a class="nav-item flex-1" href="/tags">
                标签集合
            </a>
            
            <a class="nav-item flex-1" href="/works">
                开源作品
            </a>
            
            <a class="nav-item flex-1" href="/about">
                关于博主
            </a>
            
            <a class="nav-item flex-1" href="/atom.xml">
                Rss
            </a>
            
        </div>

    </nav>
  </div>
</header>

<script>
function tmpfobid()
{
	alert("搜索效果太差, 暂时禁用 Local Search.");
}
</script>

  </div>
  <div id="main-wrap" class="position-relative" style="margin-top: 55px;">
      <div class="main-inner-content">
          <!--博文页面-->

<style>
    .header-box {
        height: 170px;
        filter: blur(10px);
        background-size: cover;
        background-color: darkgrey;
    }

    .post-box {
        padding: 15px;
        padding-top: 60px;
        min-height: 80vh;
        margin-top: -200px;
        border-radius: 4px;
        background-color: rgba(255,255,255,0.7);
    }

    .post-avatar {
        height: 30px;
        width: 30px;
        border-radius: 50%;
    }

    .flow-chart {
        text-align: center;
    }

    img[alt="post-cover"] {
        display: none;
    }
</style>





<header>
    <div id="header_box" class="header-box"></div>
</header>


<section>
<!--这里添加toc内容, 一定是在article entry之前-->
<link rel="stylesheet" href="/css/toc.css">


       <p class="show-toc-btn" id="show-toc-btn"  style="display:none" onclick="showToc()">
       <span class="btn-bg"></span>
       <span class="btn-text">文章导航</span></p>

	<div id="toc-article" class="toc-article">
	    <div id="toc-close" class="toc-close" title="隐藏导航" onclick="showBtn();">
		×
		</div>
		<strong class="toc-title"> 目录</strong>
           	<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#time"><span class="toc-number">1.</span> <span class="toc-text">time</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#dd"><span class="toc-number">2.</span> <span class="toc-text">dd</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#nc"><span class="toc-number">3.</span> <span class="toc-text">nc</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pv"><span class="toc-number">4.</span> <span class="toc-text">pv</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#tcpdump"><span class="toc-number">5.</span> <span class="toc-text">tcpdump</span></a></li></ol>
    	</div>
	




<script  language="javascript">


</script>


    <div class="container post-box">
        <div class="content post-title is-flex center flex-column" style="margin-bottom: 2px; overflow: auto;">
            <div class="has-text-centered" style="font-size:36px; padding-bottom: 7px; border-bottom: 2px solid #000">
                <strong>网络开发中常用的工具</strong>
            </div>
 
            <div class="is-flex align-center" style="margin-top:10px;">
                <span style="padding:0 10px;">post time:</span>
				
                <span class="post-date">2017-08-23</span>
            </div>
			
            
                <div>
                    
                         <a style="margin-right:5px" class="tag is-post-tag" href="/tags/网络/">网络</a>
                    
                         <a style="margin-right:5px" class="tag is-post-tag" href="/tags/linux/">linux</a>
                    
                </div>
            
        </div>
        <hr/>           


        <div class="content" style="overflow: auto; align:center;">
            <blockquote>
<p>网络中常用的Linux命令, 主要涉及, <code>time</code>, <code>dd</code>, <code>pv</code>, <code>nc</code>或者全称<code>netcat</code>, 还有tcpdump</p>
<blockquote>
<p><code>tcpdump</code>以后有时间再说, 这一篇写简单点.</p>
</blockquote>
</blockquote>
<p>本篇就算linux常用工具的一个补充吧.</p>
<p><img src="http://omotkhw3y.bkt.clouddn.com/net-tools.png" alt="post-cover"></p>
<h1 id="time"><a href="#time" class="headerlink" title="time"></a>time</h1><p>这个太熟悉了</p>
<pre><code>real    0m0.000s
user    0m0.000s
sys     0m0.000s
</code></pre><p>主要是来统计某个程序运行的时间, 分为<code>用户时间</code>和<code>内核时间</code>.</p>
<h1 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h1><p>我以前在加密打包的时候用到过<code>dd</code>工具, 它比较适合处理<code>字节块</code>. </p>
<p>例如你可以拿它去测量<code>拷贝数据的时间</code>, 即磁盘跑分:</p>
<pre><code>dd if=/dev/zero of=sun.txt bs=100M count=10
</code></pre><p>从/dev/zero不断拿0字符, 拿100M大小的数据块x1, 写到sun.txt, 统计操作所花费的时间, 以及写入速度.<br>其中<code>bs</code> 代表块, 它可以使用下面的单位:</p>
<pre><code>字节（1B）    c 
字（2B）    w 
块（512B）    b 
千字节（1024B）    k 
兆字节（1024KB）    M 
吉字节（1024MB）    G
</code></pre><p>当然还有其他参考, 不过我常用的就这么多了.</p>
<h1 id="nc"><a href="#nc" class="headerlink" title="nc"></a>nc</h1><blockquote>
<p>或者叫做 netcat, 不同的Linux或者Unix可能有不同的实现版本, 所对应的参数也不一样.</p>
</blockquote>
<p>常用的参数如下:</p>
<pre><code>nc -h
[v1.10-41+b1]
connect to somewhere:    nc [-options] hostname port[s] [ports] ... 
listen for inbound:    nc -l -p port [-options] [hostname] [port]
options:

    -c shell commands    as `-e&#39;; use /bin/sh to exec [dangerous!!]
    -e filename        program to exec after connect [dangerous!!]
    -b            allow broadcasts
    -g gateway        source-routing hop point[s], up to 8
    -G num            source-routing pointer: 4, 8, 12, ...
    -h            this cruft
    -i secs            delay interval for lines sent, ports scanned
    -k                      set keepalive option on socket
    -l            listen mode, for inbound connects
    -n            numeric-only IP addresses, no DNS
    -o file            hex dump of traffic
    -p port            local port number
    -r            randomize local and remote ports
    -q secs            quit after EOF on stdin and delay of secs
    -s addr            local source address
    -T tos            set Type Of Service
    -t            answer TELNET negotiation
    -u            UDP mode
    -v            verbose [use twice to be more verbose]
    -w secs            timeout for connects and final net reads
    -C            Send CRLF as line-ending
    -z            zero-I/O mode [used for scanning]

port numbers can be individual or ranges: lo-hi [inclusive];
hyphens in port names must be backslash escaped (e.g. &#39;ftp\-data&#39;).
</code></pre><p>解释一下:</p>
<pre><code>[-hlnruz][-g&lt;网关...&gt;][-G&lt;指向器数目&gt;][-i&lt;延迟秒数&gt;][-o&lt;输出文件&gt;][-p&lt;通信端口&gt;][-s&lt;来源位址&gt;]
           [-v...][-w&lt;超时秒数&gt;][主机名称][通信端口...]
其他参数:
    -g&lt;网关&gt; 设置路由器跃程通信网关，最丢哦可设置8个。
    -G&lt;指向器数目&gt; 设置来源路由指向器，其数值为4的倍数。
    -h 在线帮助。
    -i&lt;延迟秒数&gt; 设置时间间隔，以便传送信息及扫描通信端口。
    -l 使用监听模式，管控传入的资料。
    -n 直接使用IP地址，而不通过域名服务器。
    -o&lt;输出文件&gt; 指定文件名称，把往来传输的数据以16进制字码倾倒成该文件保存。
    -p&lt;通信端口&gt; 设置本地主机使用的通信端口。
    -r 乱数指定本地与远端主机的通信端口。    
    -s&lt;来源位址&gt; 设置本地主机送出数据包的IP地址。
    -u 使用UDP传输协议。
    -v 显示指令执行过程。
    -w&lt;超时秒数&gt; 设置等待连线的时间。
    -z 使用0输入/输出模式，只在扫描通信端口时使用。
    -q 超时退出时间
</code></pre><p>nc 往指定端口发送数据, 例如:<br><code>nc localhost 3306 &lt; xxx.txt</code>  向本机的3306端口发送数据<br>或者<br><code>dd if=/dev/zero bs=100M count=10 | nc localhost 3306</code> 向本机3306端口发送数据, 同时dd统计.</p>
<p>当然你用time统计也可以:<br><code>time nc localhost 3306 &lt; xxx.txt</code></p>
<p>别人(与我IP不同)要取得数据?<br>直接连接我的IP, 3306端口即可, 例如: <code>nc &lt;my_ip&gt; 3306 &gt; xxx.txt</code>,<br>如果是发送的压缩文件, 或者发送的识货用tar处理了, 例如:<br><code>tar -zcvf - xxx.txt | pv | nc -l -p 3306 -q 5</code>, 那么接收的时候要进行相应的解压缩, 例如:<br><code>nc &lt;target_ip&gt; 3306 | pv | tar -zxvf -</code> </p>
<p>如果是我向你的端口写, 那么你直接连接你的端口即可获取数据, 例如:<br>写:<br><code>nc &lt;ur ip&gt; &lt;ur port&gt; &lt; /dev/zero</code> 或者你可以使用dd, 做一下网络带宽写出速度统计<br><code>dd if=/dev/zero bs=1MB count=1000 | nc &lt;ur_ip&gt; &lt;ur_port&gt;</code></p>
<p>接收端, 就非常好办了:<br><code>nc -l &lt;port&gt; &gt;/dev/null</code> 或者看看进度 <code>nc -l  &lt;port&gt; |pv -W &gt; /dev/null</code><br>(你要保留文件的话, 就不要把它重定向到<code>/dev/null</code>了)</p>
<blockquote>
<p>注意这里的接收端, 不要写ip选项 (我实验了一下, 如果指定了<code>localhost</code>返回会出问题)</p>
</blockquote>
<p>当然也可以进行端口扫描(即<code>-z</code>选项):</p>
<pre><code>nc -v -z -w2 192.168.0.3 1-100     扫描192.168.0.3 的端口 范围是 1-100.
nc -u -z -w2 192.168.0.1 1-1000    扫描192.168.0.3 的端口 范围是 1-1000不过扫描的是UDP端口
nc -nv 192.168.0.1 80              扫描 80端口
</code></pre><blockquote>
<p>查看目录下文件大小: <code>ls -lh</code>;   查看文件的大小: <code>du -sh &lt;filename&gt;</code></p>
</blockquote>
<h1 id="pv"><a href="#pv" class="headerlink" title="pv"></a>pv</h1><p>pv, 即pip viewer; 它会显示当前在命令行执行的命令的进度信息 <code>sudo apt-get install pv</code> .<br>pv 命令提供了多种显示选项开关: </p>
<ul>
<li><code>-p</code>来显示百分比</li>
<li><code>-t</code>来显示时间</li>
<li><code>-r</code>表示传输速率</li>
<li><code>-e</code> 代表eta（LCTT 译注：估计剩余的时间）</li>
</ul>
<blockquote>
<p>好事是你不必记住某一个选项，因为默认这几个选项都是启用的。但是，如果你只要其中某一个信息，那么可以通过控制这几个选项来完成任务。</p>
</blockquote>
<p>这里还有一个<code>-n</code>选项来允许 pv 命令显示整数百分比，在标准错误输出上每行显示一个数字，用来替代通常的可视进度条, 但是会分行打印, <code>个人不推荐</code></p>
<p>接下来还有一个命令行选项，<code>-L</code> 可以让你修改 pv 命令的传输速率。举个例子，使用 -L 选项来限制传输速率为2MB/s。</p>
<pre><code>pv -L 2m xxx.mkv &gt; ./Desktop/yyy.mkv
</code></pre><p>这条命令等价于 <code>cp xxx.mkv &gt; ./Desktop/yyy.mkv | pv -L 2m</code><br>(Pv测试管道前面紧邻的任务)</p>
<p>另一个pv 可以帮上忙的情景是压缩文件。这里有一个例子可以向你解释如何与压缩软件Gzip 一起工作。</p>
<p><code>pv /media/himanshu/1AC2-A8E3/fnf.mkv | gzip &gt; ./Desktop/fnf.log.gz</code></p>
<p>但是注意, 凡是不加密的传输, 都不安全.</p>
<blockquote>
<p><code>nc</code>和<code>pv</code>传输文件? 还是使用<code>SSH</code>或者<code>SCP</code>吧, 这样比较安全.</p>
<blockquote>
<p>emacs的<code>TRAMP</code>也不错哦.</p>
</blockquote>
</blockquote>
<h1 id="tcpdump"><a href="#tcpdump" class="headerlink" title="tcpdump"></a>tcpdump</h1><p>这个在调试, 管理连接方面, 非常有用, 也是网络编程中, 最最常用的东西, 比如说, 你可能会碰上数据<code>鬼打墙</code>的状况, 这可能就是<code>TCP自连接</code>问题, 自己连接自己, 然后收发数据.<br>(发现这个现象, 查看一下连接, 断开, 重置连接就好了)</p>
<blockquote>
<p>关于tcpdump的经验总结, 本月有机会, 再说.</p>
</blockquote>
<hr>
<p>who is sponsoring the site? - i shall say merlin (<code>wizardmerlin945@gmail.com</code>)<br>欢迎发邮件给我(生活问题，请高抬贵手)</p>

        </div>

<!-下面是评论模块 ->
        <div class="post-reply">
            
            
        </div>

		<!-- 下面是版权声明模块-->
        
<div id="copyright" class="content blockquote">
  <blockquote>
	<span><b>版权声明</b>：本文采用<b>署名(BY)</b>-<b>非商业性使用(NC)</b>-<b>相同方式共享(SA)</b>许可协议授权,转载请注明作者及出处</span><br/>
	<span><b>本文作者</b>：<a href="/" target="_blank" title="Merlin Yu">Merlin Yu</a></span><br/>
	<span><b>本文标题</b>：网络开发中常用的工具</span><br/>
	<span><b>本文链接</b>：www.merlinblog.site/2017/08/23/net-work-tools.html</span>

  </blockquote>
</div>


    </div>
</section>

 



<script type="text/javascript">
    // 获取第一张图, 用以当封面背景图
    var img = document.querySelectorAll('img')[1]

    if (img) {
        var header_box = document.querySelector('#header_box')
        header_box.style.backgroundImage = 'url('+ img.src +')'
    }
</script>


<!-- for code block highlight --> 
<!-- theme.block_highlight -->
<!-- we do not guarantee the char sequences spell right, usr himself do it -->
<link rel="stylesheet" href="/css/highlight_rainbow.css">
<script src="/js/highlight.min.js"></script>
<script type="text/javascript"> hljs.initHighlightingOnLoad();</script>
  

<!--设置内部长度 -->                
<script type="text/javascript"> 

 $('code').attr('style', 'overflow:auto; font-size:18px; margin-left:2px; margin-right:2px;');

 
</script>






      </div>
  </div>

  <style>
  #footer {
    min-height: 10vh;
    background: black;
    color: #fff;
  }

  #footer a {
    color: #e1e1e1;
  }
</style>
<footer id="footer" class="has-text-centered is-flex center">
  <div class="container has-padding">
    <div>
      <div>
        <!--请您保留作者署名, 主题制作来之不易-->
        Copyright © <b><a href="#">Merlin Yu</a></b> 2017
        <br>
        Themed by <a href="http://haojen.github.io/">Haojen Ma</a>
		<br>
		Articles of this site licensed under <b>CC BY SA 4.0<b>
        
      </div>
    </div>
  </div>
</footer>

<script src="/js/search_core.js"></script>
<script src="/js/script.js"></script>

</body>
</html>

